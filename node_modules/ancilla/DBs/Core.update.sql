--{{ UPDATE: 0.0.0 to 0.0.1 }}
-- Creating technology type table
CREATE TABLE TECHNOLOGY_TYPE ( ID INTEGER PRIMARY KEY AUTOINCREMENT, NAME STRING UNIQUE, TYPE STRING, PATH STRING, CLASSNAME STRING );
INSERT INTO TECHNOLOGY_TYPE ( ID, NAME, TYPE, PATH, CLASSNAME ) VALUES ( NULL, 'Core', 'nodejs', 'Core.node.js', 'Core' );
INSERT INTO TECHNOLOGY_TYPE ( ID, NAME ) VALUES ( NULL, 'Web' );
INSERT INTO TECHNOLOGY_TYPE ( ID, NAME, TYPE, PATH, CLASSNAME ) VALUES ( NULL, 'Bridge', 'nodejs', 'ancilla', 'Bridge' );
-- Create Object Table
CREATE TABLE OBJECT ( ID INTEGER PRIMARY KEY AUTOINCREMENT, NAME STRING, TYPE STRING DEFAULT 'CORE', STATUS INTEGER DEFAULT 0, VALUE STRING DEFAULT NULL, WIDGET_ID INTEGER DEFAULT -1, IS_ENABLED BOOLEAN DEFAULT 1, OPTIONS STRING DEFAULT NULL, TECHNOLOGY STRING DEFAULT 'Core', TECHNOLOGY_ID INTEGER DEFAULT 1, IS_VISIBLE INTEGER DEFAULT 1, IS_PROTECTED INTEGER DEFAULT 0, UNIQUE( ID, TECHNOLOGY, TECHNOLOGY_ID ) );
-- Create Relation Table
CREATE TABLE RELATION ( ID INTEGER PRIMARY KEY AUTOINCREMENT, PARENT_ID INTEGER, CHILD_ID INTEGER, TYPE STRING DEFAULT 'CORE', EVENT STRING DEFAULT NULL, IS_ENABLED BOOLEAN DEFAULT 1, OPTIONS STRING DEFAULT NULL, IS_VISIBLE INTEGER DEFAULT 1, IS_PROTECTED INTEGER DEFAULT 0 );
-- Create Widget Table
CREATE TABLE WIDGET ( ID INTEGER PRIMARY KEY AUTOINCREMENT, NAME STRING, MODEL STRING DEFAULT NULL, OPTIONS STRING DEFAULT NULL, IS_VISIBLE INTEGER DEFAULT 1, IS_PROTECTED INTEGER DEFAULT 0 );
-- Core Technology
INSERT INTO OBJECT ( ID, NAME, TYPE, IS_PROTECTED, OPTIONS ) VALUES ( NULL, '_LANG_TECHNOLOGY_CORE', 'TECHNOLOGY', 1, '{"aArguments":[[{"id":"Core","type":"listen","connectionType":"net","host":"localhost","port":10000,"isAncillaEventsHandler":true},{"id":"web","type":"listen","connectionType":"ws","isAncillaEventsHandler":true}]]}' );
-- Create user "Admin"
INSERT INTO OBJECT ( ID, NAME, TYPE, VALUE, IS_PROTECTED ) VALUES ( NULL, 'admin', 'USER', 'd033e22ae348aeb5660fc2140aec35850c4da997', 1 );
-- Create user "User"
INSERT INTO OBJECT ( ID, NAME, TYPE, VALUE, IS_PROTECTED ) VALUES ( NULL, 'user', 'USER', '12dea96fec20593566ab75692c9949596833adc9', 1 );
-- Root's Groups
INSERT INTO OBJECT ( ID, NAME, TYPE, IS_PROTECTED ) VALUES ( NULL, '_LANG_GROUP_ROOT', 'GROUP', 1 );
-- Widget None
INSERT INTO WIDGET ( ID, NAME, MODEL, OPTIONS, IS_PROTECTED ) VALUES ( NULL, '_LANG_WIDGET_NONE', 'widget.none', NULL, 1 );
-- Widget On / Off
INSERT INTO WIDGET ( ID, NAME, MODEL, OPTIONS, IS_PROTECTED ) VALUES ( NULL, '_LANG_WIDGET_ONOFF', 'widget.onoff', '[{"value":0,"label":"_LANG_OFF","css":"off"},{"value":1,"label":"_LANG_ON","css":"on"}]', 1 );
-- Widget Generic Input ( no controls over input )
INSERT INTO WIDGET ( ID, NAME, MODEL, OPTIONS, IS_PROTECTED ) VALUES ( NULL, '_LANG_WIDGET_GENERIC-INPUT', 'widget.generic-input', NULL, 1 );

-- ( DEMO STEP ) DELETE THIS STEP
--{{ UPDATE: 0.0.1 to 0.0.2 }}
-- Demo Technology
--INSERT INTO TECHNOLOGY_TYPE ( ID, NAME, TYPE, PATH ) VALUES ( NULL, 'Fake.Technology', 'nodejs', './integrations/Fake.Technology.node.js' );
--INSERT INTO OBJECT ( ID, NAME, TYPE, TECHNOLOGY, IS_PROTECTED, OPTIONS ) VALUES ( NULL, 'Bridge', 'TECHNOLOGY', 'Bridge', 1, '{"aArguments":[[{"id":"BridgeEndpoint1","type":"listen","connectionType":"net","port":10001},{"id":"BridgeEndpoint2","type":"listen","connectionType":"net","port":10002},{"id":"BridgeEndpoint3","type":"listen","connectionType":"net","port":10003}]]}' );
--INSERT INTO OBJECT ( ID, NAME, TYPE, TECHNOLOGY, IS_PROTECTED, OPTIONS ) VALUES ( NULL, 'FakeTechnology-1', 'TECHNOLOGY', 'Fake.Technology', 1, '{"aArguments":[[{"id":"FakeEndpoint1","type":"connect","connectionType":"net","port":10003}]]}' );
-- Demo Grid
INSERT INTO OBJECT ( ID, NAME, TYPE, VALUE ) VALUES ( 20, 'Ambiente 1', 'GROUP', '/runtime/grid' );
INSERT INTO OBJECT ( ID, NAME, TYPE, VALUE ) VALUES ( 21, 'Ambiente 1a', 'GROUP', '/runtime/grid' );
INSERT INTO OBJECT ( ID, NAME, TYPE, VALUE ) VALUES ( 22, 'Ambiente 1b', 'GROUP', '/runtime/grid' );
INSERT INTO OBJECT ( ID, NAME, TYPE, WIDGET_ID ) VALUES ( 23, 'Variable On/Off', 'VARIABLE', ( SELECT ID FROM WIDGET WHERE MODEL='widget.onoff' ) );
INSERT INTO OBJECT ( ID, NAME, TYPE, WIDGET_ID ) VALUES ( 24, 'Variable Generic Input', 'VARIABLE', ( SELECT ID FROM WIDGET WHERE MODEL='widget.generic-input' ) );
INSERT INTO OBJECT ( ID, NAME, TYPE, VALUE ) VALUES ( 30, 'Ambiente 2', 'GROUP', '/runtime/grid' );
INSERT INTO OBJECT ( ID, NAME, TYPE, VALUE ) VALUES ( 40, 'Ambiente 3', 'GROUP', '/runtime/grid' );
INSERT INTO OBJECT ( ID, NAME, TYPE, VALUE ) VALUES ( 50, 'Ambiente 4', 'GROUP', '/runtime/grid' );

INSERT INTO RELATION ( ID, PARENT_ID, CHILD_ID ) VALUES ( NULL, (SELECT ID FROM OBJECT WHERE NAME='_LANG_GROUP_ROOT'), 20 );
INSERT INTO RELATION ( ID, PARENT_ID, CHILD_ID ) VALUES ( NULL, 20, 21 );
INSERT INTO RELATION ( ID, PARENT_ID, CHILD_ID ) VALUES ( NULL, 20, 22 );
INSERT INTO RELATION ( ID, PARENT_ID, CHILD_ID ) VALUES ( NULL, 20, 23 );
INSERT INTO RELATION ( ID, PARENT_ID, CHILD_ID ) VALUES ( NULL, 20, 24 );
INSERT INTO RELATION ( ID, PARENT_ID, CHILD_ID ) VALUES ( NULL, (SELECT ID FROM OBJECT WHERE NAME='_LANG_GROUP_ROOT'), 30 );
INSERT INTO RELATION ( ID, PARENT_ID, CHILD_ID ) VALUES ( NULL, (SELECT ID FROM OBJECT WHERE NAME='_LANG_GROUP_ROOT'), 40 );
INSERT INTO RELATION ( ID, PARENT_ID, CHILD_ID ) VALUES ( NULL, (SELECT ID FROM OBJECT WHERE NAME='_LANG_GROUP_ROOT'), 50 );
